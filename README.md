## Симуляция роевых мин и анализ стратегий

Интерактивная симуляция на Pygame с настройками количества мин, типа спавна и тактики атаки цели, а также набор утилит для офлайн-аналитики (массовые прогоны, сбор метрик, построение графиков и анализ CSV).

### Возможности
- **7 стратегий атаки**: прямая, зигзаг, спираль, фланговая, случайный шум, сбор в треугольник, спиральный зигзаг.
- **Окно настроек** перед стартом симуляции: число мин, стратегия, место спавна.
- **Горячие клавиши** в симуляции: Esc — выход; стрелки вверх/вниз — изменение FPS.
- **Аналитика**: пакетные прогоны без графики, CSV-результаты, графики распределений и сравнений.

### Структура проекта
- `main.py` — запуск интерактивной симуляции (Pygame) с окном настроек.
- `settings_window.py` — UI настроек: число мин, стратегия, спавн.
- `game_objects.py` — логика объектов: мины, враг, пули, алгоритмы движения.
- `config.py` — общие параметры окна, скоростей, радиусов, словарь `STRATEGY_PARAMS`.
- `analytics.py` — базовая аналитика: массовые прогоны стратегий, сохранение CSV и графиков.
- `advanced_analytics.py` — расширенная аналитика: больше диапазон мин, дополнительные графики и статистика.
- `analytics_conf.py` — однотипные прогоны по стратегиям с выводом применённой конфигурации.
- `analyze_results.py` — консольный анализ произвольного CSV с результатами симуляций.
- `plot_create.py` — пример построения бар-плотов из ранее сохранённого CSV.
- `requirements.txt` — минимальные зависимости для интерактивной части (Pygame).
- Папки `preza/` и `теория/` — материалы, изображения и PDF (не требуются для запуска).

### Установка
Требования: Python 3.10+ (Windows 10/11), PowerShell, `pip`.

Рекомендуется изолированное окружение:
```powershell
cd C:\Users\artem\Desktop\UNIC\3course\6sem\kurs
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

Установка зависимостей:
```powershell
pip install -r requirements.txt
# Библиотеки для аналитики (если будете запускать офлайн-прогоны и графики):
pip install pandas numpy matplotlib seaborn tqdm
```

Если в PowerShell блокируется выполнение скриптов, запустите терминал от имени администратора и выполните:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Запуск интерактивной симуляции (GUI)
```powershell
python main.py
```
После выбора параметров откроется окно симуляции.
- **Esc** — выйти.
- **Стрелка вверх/вниз** — увеличить/уменьшить FPS.

Подписи в левом верхнем углу показывают текущую стратегию, число живых мин и FPS.

### Стратегии
Индексы соответствуют списку в `config.py`/`main.py`:
0. Жадный алгоритм (Greedy Attack) — прямое сближение.
1. Зигзагообразное движение (Evasive Zigzag) — уклонение зигзагом.
2. Спиральное сближение (Spiral Approach) — радиально-тангенциальная спираль к цели.
3. Фланговая атака (Flank Attack) — заход с флангов под углом атаки.
4. Случайный шум (Random Perturbation) — случайные отклонения от курса.
5. Gathering (Сбор в треугольнике) — стартовая треугольная формация из 3 мин.
6. Спиральный зигзаг (Spiral Zigzag) — спираль с поперечным зигзагом.

Параметры стратегий (скорости, амплитуды и т. п.) настраиваются в `config.py` в словаре `STRATEGY_PARAMS`.

### Массовая аналитика и графики
Базовый прогон по всем стратегиям и нескольким числам мин, с сохранением CSV и построением графиков распределений:
```powershell
python analytics.py
```
Результаты:
- CSV: `simulation_results_YYYYMMDD_HHMMSS.csv`
- Графики по количеству мин: `time_to_kill_2.png`, `time_to_kill_3.png`, `surviving_mines_2.png`, `surviving_mines_3.png`, `success_rate_2.png`, `success_rate_3.png`

Расширенная аналитика (больше значений числа мин, дополнительные сравнения):
```powershell
python advanced_analytics.py
```
Результаты:
- CSV: `advanced_simulation_results_YYYYMMDD_HHMMSS.csv` (кодировка `windows-1251`)
- Графики по стратегиям: `strategy_analysis_*.png`
- Сравнение для 2 и 3 мин: `strategy_comparison_2mines.png`, `strategy_comparison_3mines.png`

Анализ произвольного CSV в консоли:
```powershell
python analyze_results.py path\to\results.csv
```

Пример построения бар-плотов из заранее сохранённого CSV:
```powershell
python plot_create.py
```
(Внутри указан конкретный файл; при необходимости отредактируйте путь в `plot_create.py`.)

### Важные параметры (`config.py`)
- `WIDTH`, `HEIGHT` — размер окна.
- `MINE_SPEED`, `BULLET_SPEED` — базовые скорости объектов.
- `MINE_RADIUS`, `MINE_DETECT_RADIUS`, `ENEMY_RADIUS`, `ENEMY_DETECT_RADIUS` — радиусы и зоны обнаружения.
- `ENEMY_REACTION_TIME` — период реакции врага в аналитике (шаг дискретного времени). В интерактивной симуляции враг обновляется каждый кадр.
- `STRATEGY_PARAMS` — численные параметры стратегий.

Изменение этих значений позволяет исследовать чувствительность результатов к настройкам среды.

### Известные нюансы
- Для аналитики обязательно установите дополнительные пакеты: `pandas`, `numpy`, `matplotlib`, `seaborn`, `tqdm`.
- В `advanced_analytics.py` CSV сохраняется в кодировке `windows-1251` для корректного чтения в Excel под Windows.
- Если окно Pygame не открывается, обновите видеодрайверы и убедитесь, что `pygame==2.6.1` установлена успешно.


